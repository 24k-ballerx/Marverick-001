{% extends 'base_portal.html' %}

{% block title %}Results Management{% endblock %}

{% block breadcrumb %}
  <div class="portal-page-header">
    <p class="portal-breadcrumb"><a href="{% url 'portal:admin_dashboard' %}">Dashboard</a> &gt; Results</p>
    <h1 class="portal-page-title">Results Management</h1>
  </div>
{% endblock %}

{% block content %}
  <div class="portal-card">
    <div class="portal-card-header">Pending Approval (approve → visible to students)</div>
    <div class="portal-card-body portal-table-wrap">
      <table class="portal-table">
        <thead>
          <tr>
            <th>Student</th>
            <th>Subject</th>
            <th>Term</th>
            <th>Score</th>
            <th>Uploaded by</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          {% for r in pending_results %}
            <tr>
              <td>{{ r.student.user.get_full_name|default:r.student.user.username }}</td>
              <td>{{ r.subject.name }}</td>
              <td>{{ r.term.name }}</td>
              <td>{{ r.score }}</td>
              <td>{{ r.uploaded_by.get_full_name|default:r.uploaded_by.username }}</td>
              <td class="actions">
                <a href="{% url 'portal:approve_result' r.pk %}" class="btn-portal btn-portal-primary">Approve</a>
                <a href="{% url 'portal:reject_result' r.pk %}" class="btn-portal btn-portal-danger">Reject</a>
              </td>
            </tr>
          {% empty %}
            <tr><td colspan="6">No pending results.</td></tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>
  <p><a href="{% url 'portal:admin_dashboard' %}">← Dashboard</a> | <a href="{% url 'portal:class_management' %}">Class & Subjects</a></p>
{% endblock %}
